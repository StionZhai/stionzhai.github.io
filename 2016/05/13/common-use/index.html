<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 常用解决方案 · StionZhai</title><meta name="description" content="常用解决方案 - Dazzlight"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archive</a></li><li class="nav-list-item"><a href="http://weibo.com/u/2731893965?is_all=1" target="_blank" class="nav-list-link">Weibo</a></li><li class="nav-list-item"><a href="https://github.com/stionzhai" target="_blank" class="nav-list-link">GitHub</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">常用解决方案</h1><div class="post-time">May 13, 2016</div><div class="post-content"><blockquote>
<p>积累一些常用方法, 方便查阅<br><a id="more"></a></p>
</blockquote>
<h3 id="移动端一像素问题"><a href="#移动端一像素问题" class="headerlink" title="移动端一像素问题"></a>移动端一像素问题</h3><blockquote>
<p>移动端一像素问题特别恶心, 不知道现在有什么好的解决方案, 比如: 0.5px 之类的(兼容性问题), 反正对于年少无知的我来说, 只能用一些伪方法了, 其他<a href="http://jinlong.github.io/2015/05/24/css-retina-hairlines/" target="_blank" rel="external">参考</a></p>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// less 写法</span></span><br><span class="line"><span class="comment">// 横向 1px ~</span></span><br><span class="line"><span class="selector-class">.one-px-h</span> (<span class="variable">@color</span>: <span class="number">#cacaca</span>) &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">@color</span>;</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 纵向 1px ~</span></span><br><span class="line"><span class="selector-class">.one-px-v</span> (<span class="variable">@color</span>: <span class="number">#cacaca</span>) &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">@color</span>;</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 demo ==&gt; 单边使用</span></span><br><span class="line"><span class="selector-class">.demo-h</span> &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">        <span class="selector-class">.one-px-h</span>(<span class="number">#da8677</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.demo-v</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">        <span class="selector-class">.one-px-h</span>(<span class="number">#da8677</span>);</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他: 实现全边框</span></span><br><span class="line"><span class="comment">// 在 iphone 6 / plus 中如果元素是无缝挨着的存在问题</span></span><br><span class="line"><span class="comment">// 有些边框莫名其妙的变得粗或更细, 建议使用单线解决</span></span><br><span class="line"><span class="selector-class">.all-border</span>(<span class="variable">@color</span>: <span class="number">#cacaca</span>) &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">@color</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">-webkit-transform-origin</span>: left top;</span><br><span class="line">    <span class="attribute">transform-origin</span>: left top;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 修改 select 样式 */</span></span><br><span class="line"><span class="selector-tag">select</span> &#123;</span><br><span class="line">    <span class="comment">/* Chrome和Firefox里面的边框是不一样的，所以复写了一下 */</span></span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 很关键：将默认的select选择框样式清除 */</span></span><br><span class="line">    <span class="attribute">appearance</span>:none;</span><br><span class="line">    <span class="attribute">-moz-appearance</span>:none;</span><br><span class="line">    <span class="attribute">-webkit-appearance</span>:none;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 在选择框的最右侧中间显示小箭头图片 */</span></span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">"http://ourjs.github.io/static/2015/arrow.png"</span>) no-repeat scroll right center transparent;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 为下拉小箭头留出一点位置，避免被文字覆盖 */</span></span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除ie的默认选择框样式清除，隐藏下拉箭头 */</span></span><br><span class="line"><span class="attribute">select</span>::-ms-expand &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="移动端-常用方法"><a href="#移动端-常用方法" class="headerlink" title="移动端 - 常用方法"></a>移动端 - 常用方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移动端禁止屏幕滚动, 适用于出现浮层的场景</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">window</span>).on(<span class="string">'touchmove'</span>, preventScroll);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recoverScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">window</span>).off(<span class="string">'touchmove'</span>, preventScroll);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preventScroll</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阻止滚动</span></span><br><span class="line">stopScroll();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 恢复滚动</span></span><br><span class="line">recoverScroll();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取系统类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPlatform</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent;</span><br><span class="line">    <span class="keyword">if</span> (ua.match(<span class="regexp">/iphone|ipad/i</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'ios'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'android'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 ios 版本号</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIOSV</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> IOS_VERSION_RE = <span class="regexp">/OS\s+(\d)_/</span>;</span><br><span class="line">    <span class="keyword">var</span> userAgent = <span class="built_in">window</span>.navigator.userAgent;</span><br><span class="line">    <span class="keyword">var</span> isIOS = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="regexp">/(?:i(?:Phone|P(?:o|a)d))/</span>.test(userAgent);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return isIOS() ? parseInt(userAgent.match(IOS_VERSION_RE)[1], 10) : 0;</span></span><br><span class="line">    <span class="keyword">return</span> isIOS() ? +userAgent.match(IOS_VERSION_RE)[<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 根据不同的端来处理不同的事</span><br><span class="line"> *</span><br><span class="line"> * @param &#123;Object&#125; opt 属性: wxCb || iosCb() || androidCb 都是回调</span><br><span class="line"> * @example</span><br><span class="line"> *     osDo(&#123;wxCb: function () &#123;&#125;&#125;);</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">osDo</span>(<span class="params">opt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent;</span><br><span class="line">    <span class="keyword">if</span> (ua.match(<span class="regexp">/Micromessenger/i</span>)) &#123;</span><br><span class="line">        opt.wxCb &amp;&amp; opt.wxCb();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (ua.match(<span class="regexp">/iphone|ipad/i</span>)) &#123;</span><br><span class="line">        opt.iosCb &amp;&amp; opt.iosCb();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        opt.androidCb &amp;&amp; opt.androidCb();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 吊起数字键盘 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"tel"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="点击-hover-模拟"><a href="#点击-hover-模拟" class="headerlink" title="点击 hover 模拟"></a>点击 hover 模拟</h4><p>采用 <code>active</code> 而不是 <code>hover</code> 如:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#efefef</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使其生效:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).bind(<span class="string">'touchstart'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="hammer-amp-zepto-tap-事件冲突"><a href="#hammer-amp-zepto-tap-事件冲突" class="headerlink" title="hammer &amp; zepto tap 事件冲突"></a>hammer &amp; zepto tap 事件冲突</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gesture = e.gesture;</span><br><span class="line"><span class="keyword">if</span> (!gesture) &#123;</span><br><span class="line">    <span class="comment">// hammer 触发的事件会有 gesture 这个属性， 可以以此来判断</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>直接写上 <code>active</code> 伪类是不生效的, 需给 <code>document</code> 绑定一个空 (也可以不空) 的 <code>touch</code> 事件, 引入<code>hammer</code> 可以不用添加此事件, <code>hammer</code>中已经绑定了此事件</p>
<p>不要用: <code>-webkit-tap-highlight-color: 颜色</code> 有些库会默认给 dom 设置为内联 <code>rgba(0, 0, 0, 0)</code></p>
</blockquote>
<p>####</p>
<h3 id="表单相关"><a href="#表单相关" class="headerlink" title="表单相关"></a>表单相关</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// zepto || jquery 快速获取表单的两种方式</span></span><br><span class="line">$(<span class="string">'#form'</span>).serializeArray();</span><br><span class="line">$(<span class="string">'selector'</span>).find(<span class="string">':input'</span>).serializeArray();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 格式化 $.serializeArray 数据</span><br><span class="line"> *</span><br><span class="line"> * @example serialize2obj($('#form').serializeArray())</span><br><span class="line"> * @param  &#123;Array&#125; arr 表单数组</span><br><span class="line"> * @return &#123;Object&#125;    表单数据组成的对象</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize2obj</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        result[arr[i].name] = arr[i].value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// checkbox 获取是否选中</span></span><br><span class="line">$(<span class="string">'selector'</span>)[<span class="number">0</span>].checked;</span><br></pre></td></tr></table></figure>
<h3 id="其他小工具"><a href="#其他小工具" class="headerlink" title="其他小工具"></a>其他小工具</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 获取 url 中的参数</span><br><span class="line"> *</span><br><span class="line"> * @param  &#123;string&#125; name 参数名称</span><br><span class="line"> * @return &#123;string&#125;      查询结果 str || null</span><br><span class="line"> * @example</span><br><span class="line"> *     getQueryString('bookid');</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryString</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|&amp;)'</span> + name + <span class="string">'=([^&amp;]*)(&amp;|$)'</span>, <span class="string">'i'</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">decodeURI</span>(r[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制对象 防止引用导致的意外情况</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ================= 下面是烧脑积累 ====================</span></span><br><span class="line"><span class="comment">// get 'a.b.c.[2]'</span></span><br><span class="line"><span class="keyword">var</span> getModule = <span class="function"><span class="keyword">function</span> (<span class="params">name, opt_obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parts = name.split(<span class="string">'.'</span>);</span><br><span class="line">    <span class="keyword">var</span> cur = opt_obj || <span class="built_in">window</span>;</span><br><span class="line">    <span class="keyword">var</span> part;</span><br><span class="line">    <span class="keyword">for</span> (; part = parts.shift();) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/\[\d+\]/</span>.test(part)) &#123;</span><br><span class="line">            <span class="keyword">var</span> key = part.match(<span class="regexp">/^(\w+)\[(\d+)\]$/</span>);</span><br><span class="line">            <span class="keyword">if</span> (key.length === <span class="number">3</span> &amp;&amp; cur[key[<span class="number">1</span>]] &amp;&amp; cur[key[<span class="number">1</span>]][key[<span class="number">2</span>]]) &#123;</span><br><span class="line">                cur = cur[key[<span class="number">1</span>]][key[<span class="number">2</span>]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur[part] != <span class="literal">null</span>) &#123;</span><br><span class="line">                cur = cur[part];</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 消除元素间空格问题 */</span></span><br><span class="line"><span class="selector-tag">font-size</span>: 0;</span><br><span class="line"><span class="selector-tag">letter-spacing</span>: 0;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文本溢出展示 '...' */</span></span><br><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">block</span>;</span><br><span class="line"><span class="selector-tag">white-space</span>: <span class="selector-tag">nowrap</span>;</span><br><span class="line"><span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line"><span class="selector-tag">text-overflow</span>: <span class="selector-tag">ellipsis</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多行文本溢出展示 '...' */</span></span><br><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">-webkit-box</span>;</span><br><span class="line"><span class="selector-tag">-webkit-box-orient</span>: <span class="selector-tag">vertical</span>;</span><br><span class="line"><span class="selector-tag">-webkit-line-clamp</span>: 3;</span><br><span class="line"><span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 水平垂直居中 (定位) */</span></span><br><span class="line"><span class="selector-class">.vh-center</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-50%, -50%, 0);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-50%, -50%, 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="前端模板使用技巧"><a href="#前端模板使用技巧" class="headerlink" title="前端模板使用技巧"></a>前端模板使用技巧</h3><p>以 underscore 或者 lodash 为例:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 数据模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"temp"</span>&gt;</span><span class="javascript"></span><br><span class="line">    &lt;% <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = data.length; i &lt; j; i++) &#123; %&gt;</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"show-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>id: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.id</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>city: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.city</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>score: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.score</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>money: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.money</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>content: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.content</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>place: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data</span>[<span class="attr">i</span>]<span class="attr">.place</span> %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    <span class="keyword">var</span> data = [&#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="string">"123456"</span>,</span><br><span class="line">        <span class="string">"city"</span>: <span class="string">"京都"</span>,</span><br><span class="line">        <span class="string">"score"</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">"money"</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">"content"</span>: <span class="string">"京都style"</span>,</span><br><span class="line">        <span class="string">"place"</span>: <span class="string">"haha"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="string">"234567"</span>,</span><br><span class="line">        <span class="string">"city"</span>: <span class="string">"天津"</span>,</span><br><span class="line">        <span class="string">"score"</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="string">"money"</span>: <span class="number">400</span>,</span><br><span class="line">        <span class="string">"content"</span>: <span class="string">"天津style"</span>,</span><br><span class="line">        <span class="string">"place"</span>: <span class="string">"skjsksjk"</span></span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取数据模板</span></span><br><span class="line">    <span class="built_in">console</span>.log($(<span class="string">'#temp'</span>).html());</span><br><span class="line">    <span class="keyword">var</span> template = _.template($(<span class="string">'#temp'</span>).html());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 渲染数据</span></span><br><span class="line">    $(<span class="string">'#app'</span>).html(template(data));</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="浏览器兼容"><a href="#浏览器兼容" class="headerlink" title="浏览器兼容"></a>浏览器兼容</h3><p><a href="http://www.cnblogs.com/rubylouvre/archive/2009/10/14/1583362.html" target="_blank" rel="external">检测浏览器版本</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 修复 ie8 以下 placeholder 兼容性问题</span><br><span class="line"> * @param  &#123;Object&#125; css 忽略, 待完善...</span><br><span class="line"> * @return undefined</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fixPlaceholder</span>(<span class="params">css</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ieVersion = <span class="built_in">eval</span>(<span class="string">"''+/*@cc_on"</span>+<span class="string">" @_jscript_version@*/-0"</span>) * <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> ie8 = ieVersion === <span class="number">5.8</span>;</span><br><span class="line">    <span class="keyword">var</span> ie7 = ieVersion === <span class="number">5.7</span>;</span><br><span class="line">    <span class="keyword">var</span> ie6 = ieVersion === <span class="number">5.6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ie8 || ie7 || ie6) &#123;</span><br><span class="line">        $(<span class="string">'.fixplaceholder'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, element</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> placeText = $(element).attr(<span class="string">'placeholder'</span>);</span><br><span class="line">            $(element).val(placeText)</span><br><span class="line">                .click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> ($(<span class="keyword">this</span>).val() === placeText) &#123;</span><br><span class="line">                        $(<span class="keyword">this</span>).val(<span class="string">''</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .blur(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> val = $(<span class="keyword">this</span>).val();</span><br><span class="line">                    <span class="keyword">if</span> (!$.trim(val)) &#123;</span><br><span class="line">                        $(<span class="keyword">this</span>).val(placeText);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="关于-js-类型检测"><a href="#关于-js-类型检测" class="headerlink" title="关于 js 类型检测"></a>关于 js 类型检测</h3><ul>
<li>一篇不错的介绍<a href="https://www.xiabingbao.com/javascript/2015/07/04/javascript-type.html" target="_blank" rel="external">文章</a></li>
</ul>
<h3 id="移动端开发经验总结"><a href="#移动端开发经验总结" class="headerlink" title="移动端开发经验总结"></a>移动端开发经验总结</h3><ol>
<li>icon 小标志记得留buffer (比如一个 icon 3x3, 实际大约要是 3.2x3.2)</li>
<li>能加 line-height 的地方尽量添加 line-height</li>
<li>需要对其的元素, 设计时需要放到一起, 不然错行问题够恶心</li>
<li>页面最底部不要用 margin-bottom 去撑开, 用 padding-bottom</li>
<li>容错处理放到第一位</li>
</ol>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/24/sweet-log/" class="prev">PREV</a><a href="/2016/05/06/Design-pattern/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://stionzhai.github.io">Dazzlight</a>, Powered by Hexo & Hexo-theme-apollo.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>